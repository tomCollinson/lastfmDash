"use strict";angular.module("lastfmDashApp",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"})}]),angular.module("lastfmDashApp").controller("MainCtrl",["$scope","$timeout","AjaxCall",function(){}]),angular.module("lastfmDashApp").controller("HeaderCtrl",["$scope","$location","$route","$rootScope","$element",function(a,b,c,d){a.isActive=function(c){return c.path===b.path().substring(9)?(a.pageTitle=c.title,d.currentSection=c.path,!0):!1}}]),angular.module("lastfmDashApp").factory("AjaxCall",["$http",function(a){return{get:function(b,c){return a.get(b,{params:c})}}}]),angular.module("lastfmDashApp").directive("trackGrid",function(){return{templateUrl:"views/trackgrid.html",restrict:"A",controller:["$scope","$element","$attrs","AjaxCall","$timeout",function(a,b,c,d,e){a.getData=function(){d.get("query.php",{method:"user.getrecenttracks",user:"crimsonc",limit:24,format:"json"}).then(function(b){console.log(b),a.data=b.data.recenttracks;for(var c=0;c<a.data.track.length;c+=1){var d=a.data.track[c].artist["#text"],e=a.data.track[c].name,f=d+" - "+e;a.data.track[c].spotify=f}})},a.intervalFunction=function(){e(function(){a.getData(),a.intervalFunction()},12e4)},a.getData(),a.intervalFunction()}],link:function(){}}}),angular.module("lastfmDashApp").directive("track",function(){return{restrict:"A",controller:["$scope","AjaxCall",function(a,b){a.getSpotifyData=function(c){var d,e;b.get("http://ws.spotify.com/search/1/track.json",{q:c}).then(function(b){d="none",void 0!==b.data.tracks[0]?(d=b.data.tracks[0].href,e=d.lastIndexOf(":"),d="http://open.spotify.com/track/"+d.substring(e+1)):d="none",a.spotifyUrl=d})}}],link:function(a,b){function c(){var c=1;a.winWidth=$(window).innerWidth(),a.winWidth>=380&&a.winWidth<720?c=2:a.winWidth>=720&&a.winWidth<1024?c=3:a.winWidth>=1024&&a.winWidth<1300?c=4:a.winWidth>=1300&&(c=5),b.css({height:a.winWidth/c,width:a.winWidth/c})}setTimeout(function(){c()},100),$(window).on("resize",function(){c()})}}});